\section{Lösungsansätze}
\subsection{Elimination}
Ein Lösungsansatz ist die Elimination von providerunabhängigen Adressen, so dass alle Edge-Netzwerke einen Subpräfix aus dem Präfix ihres Providers nutzen. Nur der Präfix des Providers muss in der DFZ bekanntgegeben werden, was zu einer kleineren und stabileren Routing-Tabelle führt, da es deutlich weniger Provider als ENs gibt und Provider nur geringen Veränderungen unterliegen.\\

%TODO: angucken (das ist der komisch Abschnitt der wider aufgetaucht ist)
Die Elimination von PIs erfordert neue Ansätze um Multihoming zu ermöglichen. Die Erreichbarkeit durch alle ISPs ohne in der DMZ als eigener Präfix sichtbar zu sein, erfodert das dem EN von jedem Provider ein Präfix zu gewiesen wird. Die Endgeräte und von ihnen genutze Protokolle müssen so erweitert werden, dass sie mit mehrer Addressen zur Packetübermittlung umgehen können \cite{jen:2008:start}. Ein Endgeräte muss zum dem Paketversand möglichst alle Addressen seines Kommunikationspartners ermitteln, und für Antworten alle eigenen Addressen dem Kommunikationspartner mitteilen, um Redudanz zu ermöglichen \cite{jen:2008:start}. Außerdem muss während der Kommunikation beobachten über welche Adressen der Kommunikationspartner erreichbar ist, und ggF. dafür sorgen das Packete zu einer anderen Addresse versand werden \cite{jen:2008:start}. Dies sollte geschehen ohne das die Anwendungen, welche eine Verbindung benutzen dies nicht mitbekommen. Um diese zu erreichen sind Veränderungen an verschiedenen Diensten (z.B. DNS) und Prtokollebenen (z.B. Transportschicht) denkbar. Einen möglichen Ansatz bietet shim6\cite{nordmark:2009:RFC5533}, eine Erweiterung der an der Schnittstelle zwischen Transport- und Netzwerkschicht. Shim6 sorgt für den Austausch der möglichen Addressen, überprüft während der gesamten Kommunikation ihre Erreichbarkeit und schreibt falls Notwendig Addresse um, so dass Einwechsel der Addressen auf beliebiger Seite für die Transportschicht transparent bleibt. Damit biete shim6 auch Möglichkeiten um Mobile-IP trotz der Doppelsymatik der IP-Adressen zu betreiben. \\
 

Die Elimination von providerunabhänigen Adressen führt dazu, dass sich der Präfix eines Edge-Netzwerkes beim Wechseln des Providers ändert. Eine mögliche Lösung bietet IPv6 mit der ''Statless Address Autoconfiguration''. Sie ermöglicht einen Präfixwechsel des gesamten Netzwerkes, ohne Änderungen an jedem Endgerät vorzunehmen \cite{RFC4862}. Allerding sind auch hier Erweiterung notwendig um laufende Kommunikationsvorgänge nicht zu unterbrechen. Für Edge-Netzwerke, die IPv4 nutzen, existiert zur Zeit keine vergleichbar zuverlässige Lösung.\\

Generell muss die Intelligenz der Endgeräte erhöht werden. Dies widerspricht zwar nicht dem Prinzip des Internets, erschwert aber die Wartung großer Netze und stellt insbesondere ein Problem für eingebette oder stark ausgelastete Systeme dar. \\

Die hohen Anforderungen an die Endgeräte bei der Elimination machen ihre Umsetzung für die Betreiber der Edge-Netzwerke unattraktiv \cite{jen:2008:start}. Die Vorteile der Elimination liegen auf Seite der ISPs, welche den stabilen Betrieb ihrere Router durch die wachsende Routing-Tabelle in der DFZ gefährdet sehen. Jedoch ist für die Umsetzung eine aktive Beteiligung der Edge-Netzwerke erfoderlich, da sie ihre providerunabhängigen Präfixe aufgeben müssen \cite{jen:2008:start}. Aufgrund dieses Mangels an Motivation ist zu erwarten, dass nur eine langsame Einführung der Elimination möglich ist. Erste eine hohe Anzahl an Edge-Netzwerken, die auf ihren PI-Präfix verzichtet, bringt die gewünschten Effekte. \\

Ein Vorteil des Eliminationsansatzes ist, dass keine neue Strukturen geschaffen werden müssen. Jedoch sind die Änderungen an vorhandenen Strukturen nötig, die für die Edge-Netzwerke nicht transparent sind.

\subsection{Separation}
Die Grundidee der Separation ist die doppelte Bedeutungen einer IP-Addresse aufzuheben, indem Idenitifier und Locator seperat zugeordnet werden. Der Ansatz wird daher auch als Identifier-Locator-Split bezeichnet \cite{deering:1996:map},\cite{jen:2008:start}. Routing-Entscheidungen in der DFZ werden anhand von RLOCs (routing locators) getroffen. Ein Endgerät wird durch den EID (Endpoint Identifier) eindeutig und dauerhaft identifiziert. An der Schnittstelle zwischen Zielnetzwerk und DFZ muss zwischen EIDs und RLOCs umgewandelt werden. Um dies zu ermöglichen, muss eine Zuordnung zwischen EIDs und RLOCs geschaffen werden. Dazu wird ein Mappingsystem verwendet, das Auskunft erteilt über welche RLOCs ein gegebener EID zu erreichen ist. \\

Das Mapping-System ist eine Datenbank, welche Paarungen aus EIDs und RLOCs enthält, wobei die EIDs als Schlüssel dienen. Für den Paketversand wird ein Locator des Empfängers benötigt, so dass ohne Mapping ein EN nicht von anderen ENs erreicht werden kann. Um eine möglichst hohe Erreichbarkeit zu gewährleisten, sollte das Mappingsystem also redundant und sicher vor Manipulation sein. \\
Um bei Multihoming die Nutzung der einzelnen Providerverbindungen für einkommende Pakete genau zu steuern, sollte das Mapping eine Gewichtung der RLOCs bieten \cite{mathy:2008:dht}. Es müssen ebenfalls Mechanismen geboten werden die eine zeitnahe direkte Einflussnahme des Netzwerkbetreibers auf das Mapping erlauben. \\
Die Zuordnung zwischen EIDs und RLOCs sollte möglichst schnell durchgeführt werden, um möglichst geringe Latenzen zu erhalten. Insbesondere Caching kann helfen die Anzahl der vermutlich recht aufwendigen Anfragen an das Maping-System zu reduzieren. Im Widerspruch dazu sollten Änderung am Mappingsystem möglichst schnell für alle Router sichtbar werden. 

\paragraph{Vorteile}
Ein ISP kann ohne Einschränkungen die RLOCs für seine Kunden aus seinem RLOC-Präfix entnehmen. Dies führt dazu, dass die Routing-Tabelle im Core erheblich kleiner und stabiler wird, da es weniger ISPs als Edge-Netzwerke gibt und die Anzahl der ISPs sowie ihre Routen nur geringer Veränderungen unterliegen \cite{jen:2008:start},\cite{deering:1996:map} \\
Um ein Edge-Netzwerk durch mehrere Provider anzubinden, also um Multihoming zu betreiben, müssen nur die RLOCs aller Provider im Mapping-System mit dem EID-Präfix des Edge-Netzwerk assoziert werden\cite{farinacci:2009:LISP}. Dies ermöglicht Multihoming ohne Auswirkungen auf das Routing in der DFZ zu haben. Ein Providerwechsel wirkt sich nur auf die Zuordnung im  Mapping-System aus, nicht auf das Core-Routing.\\
Da EIDs und RLOCs sich ansonsten ähnlich zu jetzigend den IP-Adressen verhalten, ist es weder notwendig die Endgeräte noch die Router innerhalb der DFZ zu modifizieren \cite{jen:2008:start}. Nur an der Schnitstelle zwischen DFZ und Edge-Netzwerken sind Änderungen nötig. \\
Die Trennung von DFZ und Edge-Netzwerken durch eine Schnitstelle schafft mehr Modularität. Dies kann genutzt werden, um die beiden Strukturen unabhängig voneinander zu modifizieren und zu verbessern. \\ %TODO: ist der satz zu viel??? weil unten
Die Gewichtung der RLOCs im Mapping-System erlaubt eine genaue Steuerung des Verkehrsflusses über die verschiedenen Provider eines multihomed Edge-Netzwerkes \cite{mathy:2008:dht}. Für weitere Anwendung, wie etwa das Reagieren auf DoS-Attacken, kann das Mapping-System auch genutzt werden \cite{jen:2008:start}. \\
Der Locator-Identifier-Split ermöglicht, dass sich Endgeräte bewegen ohne das sich ihr Identfier ändert. Somit ist die Kommunikation zwischen Endgeräten von Topologieänderungen unbeeinflusst. Dies bedingt jedoch ein ausreichend schnelles Mapping-System, da ohne korrekte Zuordnung keine Daten zum Endgerät geleitet werden können.

\paragraph{Nachteile}
Die Umwandlung zwischen RLOCs und EIDs ist mit einem gewissem Aufwand verbunden, der aber im Vergleich zu den Einsparungen beim DFZ-Routing vernachlässigt werden kann. Zentraler Bestandteil und kritischer Faktor des Separationsansatzes ist ein Mapping-System zwischen EIDs und RLOCs, das alle schon genannten Anforderungen erfüllen muss. 


\subsubsection{Lösungsansätze zur Separation}
Für die Umwandlung zwischen RLOCs und EDIs existieren zwei verschiedene Ansätze. Beim Tunneling-Verfahren werden die EID-Pakete aus dem EN an der Schnittstelle zur DFZ in ein RLOC-Paket zum Routen innerhalb der DFZ eingepackt \cite{farinacci:2009:LISP}. Ein anderes Verfahren verfolgen Address-Rewriting-Protokolle. Hier werden die Adressen des Ursprungspaketes umgeschrieben. 

\paragraph{Tunneling mit LISP}
LISP erfodert keine Modifikationen an den Endgeräten in den Edge-Netzwerken \cite{farinacci:2009:LISP}. Sie arbeiten bei der Adressierung weiterhin mit IPv4- oder IPv6-Adressen. Auch die Namensauflösung und das Routing innerhalb von Edge-Netzwerken muss nicht verändert werden. Wird ein Paket zum ISP übermittelt, erreicht es beim Provider den ITR (Ingress Tunnel Router). Dieser ermitelt zum Ziel-EID die RLOCs mittels des Mapping-Systems. Anschließend packt er das IP-Paket in ein LISP-Paket. Als Zieladress wird die zuvor ermittelte RLOC benutzt, Quelladresse ist die RLOC des ITRs. Dann wird das Paket durch die DFZ übermittelt. Es erreicht schließlich den ETR (Egress Tunnel Router), der die Ziel-RLOC besitzt. Dieser ist an das EN, in dem sich die Ziel-EID, befindet angeschlossen. Er packt das Packet aus und sendet es an das EN. \\
 % TODO: Sprache verbessern
Durch die Kapselung des Ursprungspaketes kann es dazu kommen, dass das enstehende Paket die Maximum Transfer Unit (MTU) einer Verbindung innerhalb der DFZ überschreitet. LISP definiert zwei verschiedene Verfahren, um dieses Problem zu lösen \cite{farinacci:2009:LISP}. Eine statusfreie Lösung ist es, Pakete ab einer bestimmten Größe zu verwerfen und eine ICMP-Meldung zum Absender zuschicken. Die zweite Lösung sieht vor, dass der ITR zu allen gecachten RLOCs die maximale Packetgröße speichert, mit der er dorthin senden konnte ohne eine ICMP-Meldung zu erhalten. Dies stellt sicher das die MTU voll ausgenutzt wird.

\paragraph{Adress-Rewriting mit Six/One Router}
Im Gegensatz zu LISP wird bei Six/One das Umwandeln zwischen EIDs und RLOCs von Routern innerhalb des Edge-Netzwerkes übernommen \cite{vogt:2008:six}. Das EN verfügt für jede Verbindung zu einem ISP über ein Six/One Router. Dieser ist für die Umwandelung zwischen EIDs und RLOCs zuständig. Unabhängig davon, ob das Zielnetzwerk Six/One unterstützt, werden die Quelladresen ausgehender und die Zieladdressen eingehender Pakete umgewandelt. Handelt es sich bei der Gegenseite um ein EN mit Six/One Router, werden ebenfalls die jeweils anderen Adressen umgeschrieben. Die orginalen Addressen werden im Six/One Extension Header des Paketes gespeichert, so dass eine Rückübersetzung am Ziel möglich ist. Um die RLOC des Zielnetzwerkes zu ermitteln wird das Mappingsystem befragt.

\subsubsection{Lösungsansätze für das Mapping}
Im Zusammenhang mit LISP wurden schon zahlreiche Mapping-Systeme spezifiziert. Ihre Verwendung ist aber auch zusammen mit anderen Separationansätzen denkbar. Die verschiedenen Vorschläge unterscheiden sich in der Verteilungsart der Informationen \cite{mathy:2008:dht}. Einfache Systeme wie LISP-NERD verteilen die Mapping-Informationen aktiv, mittels des Push-Mechanismus. Dabei werden die kompletten Mapping-Informationen auf allen Routern vorgehalten und es wird ein Mechanismus geschaffen der Änderung an die vorhandenen Knoten verteilt. Bei anderen Protokollen, wie zum Beispiel LISP-DHT, ermitteln die Router nur die Mappings, welche sie tatsächlich benötigen. Es gibt keine Instanz, die eine komplette Zuordung besitzt. Diese Protokolle haben eine komplexere Struktur und skalieren nach ersten Messungen gut \cite{iannone:2007:cost}. Es gibt auch Mapping-Systeme die eine Zwischenform nutzen, indem nur die existierenden EIDs aktiv verteilt werden. Ein Beispiel hierfür bietet LISP-ALT.

\paragraph{LISP-DHT} 
Ein mögliches Mappingsystem, basierend auf einer modifzierten verteilten Chord-Hashtabelle, beschreibt LISP-DHT \cite{mathy:2008:dht}. Chord nutzt für jeden Teilnehmer eine ChordID und bildet eine ringförmige Struktur, die nach den ChordIDs geordnet ist. Die Chord-Knoten müssen sich den nächst größeren und nächst kleineren Knoten merken, um die Tabelle zu erhalten und Anfragen weiterzuleiten. Jeder Knoten ist für alle ChordIDs zuständig, die kleiner gleich seiner eigenen, aber größer als die seines Vorgängers sind. In LISP-DHT wird die größte von dem Knoten verwaltete EID als ChordID genutzt. Um einen Chord-Knoten zu adressieren, müssen seine EID und RLOCs gespeichert werden. \\
Jeder Chord-Knoten besitzt eine sogenannte Finger-Tabelle, um Abfragen effizienter durchzuführen. Der $i$te Eintrag der Tabelle enthält den $m+2^{i-1}$ten Knoten der Chord, wobei $m$ die Nummer des Knoten ist, der die Finger-Tabelle speichert. Die Korrektheit der Zuordnung ist nicht nötig, um die Funktionalität der Chord zu gewährleisten. Jedoch können mittels der Finger-Tabelle Abfragen in O(log n) Schritten bearbeitet werden. \\
Um  dem Chord-Ring beizutreten muss wenigstens ein Chord-Knoten bekannt sein. Von diesem ausgehend sucht der beitretende Knoten in der bestehenden Chord seinen Vorgänger und  Nachfolger und initialisiert seine Finger-Tabelle. Nun ist er bereit Anfragen an die Chord zu stellen, um beliebige Mappings zu erfahren. Aber kann er noch keine eigenen Mappings in die Chord einfügen. \\
Zum Einfügen eines Mappings in die Chord, ist eine Authentifikation nötig. Ein Knoten, der Mappings für einen bestimmten EID-Präfix liefern möchte, muss über ein Zertifikat verfügen, das ihn dazu berechtigt. Solche Zertifikate könnten von der zuständigen RIR ausgestellt werden. Die Nachbarn des neuen Knotens können so überprüfen, ob eine Berechtigung vorliegt und anschließend den Knoten als neuen Nachbarn aufnehmen. \\
Um Redudanz zu gewährleisten, sollte das Mapping für einen EID-Präfix mehrfach in der Chord gespeichert werden. Ein Ansatz wäre das Spiegeln des Mappings auf dem jeweiligen Nachbarknoten. Dadurch wird es für den Anbieter des Mappings jedoch schwieriger seine EIDs zu kontrollieren. Um dies zu vermeiden, können Redundanzgruppen gebildet werden. Sie enthalten mehrere Server, die das gleiche Mapping anbieten. Eine solche Redundanzgruppe wird in der Vorgänger- und Nachfolgerrelation sowie in der Finger-Tabelle anstatt eines einzelnen Chord-Knotens verwendet. Innerhalb der Redundanzgruppe ist eine Gewichtung zwischen den Servern möglich. \\
LISP-DHT bietet ein redundantes und robustes Mapping-System, das mittels Finger-Tabellen einen effizienten Zugriff auf die Mapping-Daten erlaubt. Das Mapping-System an sich besitzt keine Cache-artigen Strukturen. Es bietet dem Besitzer der EIDs immer direkte Kontrolle über die Zuordnung.



