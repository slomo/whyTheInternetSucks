\section{Lösungsansätze}
\subsection{Elimination}
Ein Lösungsansatz ist die Elimination von Provider unabhängigen Adressen, also eine streng hierachische Vergabe der Präfixe. Nur Präfixe von Providern müssen im Internet-Core bekannt gegeben werden, was zu einer kleinener und stabileren Routing-Tabelle führt, da es deutlich weniger Provider als ENs gibt und Provider nur geringen Veränderungen unterliegen.\\

Die Seperation führt zum Bedarf nach Neunummerierung beim Wechsel des ISPs. Eine mögliche Lösung bietet IPv6 mit der "Statless Address Autoconfiguration", sie ermöglich einen Präfixwechsel des gesamten Netzwerkes, ohne Änderung an jedem Endgerät vorzunehmen \cite{RFC4862}. Hier bei kommt es jedoch zum Verlust der genauen Kontrolle über die Addressvergabe. Für Edge Netzwerke die IPv4 nutzen existiert zur Zeit keine vergleichbar zuverlässige Lösung.\\

Verfügt ein Edge Netzwerk über Verbindungen zu merheren ISPs, erhält es bei der hierachischen Vergabe auch mehrer Präfixe, so dass jedes Endgerät in diesem EN über mehrere Addressen verfügt. Die Endgeräte und von ihnen genutze Protokolle müssen so erweitert werden, dass sie mit mehrer Addressen zur Packetübermittlung umgehen können \cite{jen:2008:start}. Dazu sind umfangreiche Änderungen nötig. Endgeräte müssen vor dem ersten Paketversand mögliche Addressen ihres Kommunikationspartners ermitteln, und für eventuelle Antworten alle eigenen Addressen dem Kommunikationspartner mitteilen, um Redudanz zu ermöglichen. \cite{jen:2008:start}. Hierfür sind Modifikationen am DNS oder Transportlayer-Protokoll denkbar. Desweitern müssen Endgeräte erkennen können, ob eine Verbindung zu einem ISP nutzbar ist \cite{jen:2008:start}. Dazu sind Erweiterungen am Internetprotkoll nötig, wie zum Beispiel durch shim6 vergeschlagen. Auch ist es nicht möglich den Verkehrsfluss über die verschiedene Verbindungen zentral zu steuern, da die möglichen Verbindung dezentral von den einzeldenen Endgeräte ermittelt und ausgewählt wird. \\

Generell steigt der Aufwand der nötigen Berechnungen auf den Endgeräten, was zwar dem Prinzip des Internets nicht widerspricht, aber die Wartung großer Netze erschwert. Dies ist stellt auch ein Problem für eingebette oder stark frequentierte System dar, die mit dem zusätlichen Aufwand überlastet sein könnten. \\

Die hohen Anfoderung an die Endgeräte führen dazu, dass die Einführung von Providerabhänigen Addressen für Edge Netzwerke unattraktiv ist, oder sogar gar nicht im Intresse der Betreiber. Die Vorteile der Elimination liegen auf Seite der ISPs, welche den stabilen Betrieb ihrere Router durch die wachsend Core Routing Tabelle gefährdet sehen, diese können jedoch nicht aktiv an der Einführung des Eleminationsansatz mitarbeiten \cite{jen:2008:start}. Durch diese Ungleichheit in der Motivation, ist zu erwarten das nur ein langsamer Umstieg möglich ist. Spürbare Veränderung können sich jedoch erst einstellen, wenn eine große Anzahl von Edge Networks auf PIs verzichtet. \\

Ein Vorteil des Seperation Ansatzes ist, das keine neue Strukturen geschaffen werden müssen. Jedoch sind die nötigen Änderungen an vorhandenen Strukturen sehr umfassend und betreffen eine große Anzahl an Systemen.

\subsection{Seperation} %TODO: Formulierung verbessern 
Der Seperationsansatz wird auch als Identifier/Locator-Split bezeichnet. Eine Unicast-Adresse besitzt in der Praxis eine überladene Bedeutung. Zum einen identifiziert sie ein einzelnes Interface zu einem bestimmten Zeitpunkt, gleichzeitig dient sie aber auch dazu ein Gerät zu lokalisieren. Da eine Verbindung zwischen zwei Geräten an die Addressen der jeweiligen Gesprächspartner gebunden ist, bedeutet ein Wechsel des Netzes auch den Abbruch der Verbindung.  \\
%TODO: Frage: was heißt das für Multihoming und Providerwechsel.

Die Grundidee der Seperation ist es diese zwei Funktionen zu trennen und einen Identfier für ein Gerät und einen Locator für den Ort des Gerätes im Internet zu schaffen. Routing-Entscheidungen im Internet-Core werden anhand von RLOC (routing Locators) getroffen. Ein Endgerät in einem Edge-Network wir durch EID (Endpoint Identfier) eindeutig und dauerhaft identifziert. An der Schnittstelle zwischen EN und ISP müssen EIDs in RLOCs und anderesherum übersetzt werden. Um dies zu ermöglichen muss eine Zuordnung zwischen dem Locator und dem Identfierer geschaffen werden. Dazu wird ein Mappingservice verwendet, der Auskunft über welche RLOCs ein gegebner EID zuerreichen ist. 

\paragraph{Vorteile}
Innerhalb des Internet-Cores müssen nur ISPs mit RLOCs addressiert werden. Dies führt dazu das die Routing-Tabelle im Core erheblich kleiner wird und stabiler, da es nur weniger ISPs als Edge-Networks gibt und die Anzahl der ISPs sowie ihre Routen nur geringer Veränderungen unterliegen. \cite{jen:2008:start} \cite{deering:1996:map} \\
Um ein Edge-Network durch mehrer Provider anzubinden, also um Multihoming zu betreiben, müssen nur die RLOCs der Provider im Mappingsystem mit EID-Prefix des Edge-Networks assoziert werden. Dies ermöglich Multihoming ohne Auswirkungen auf das Routing des Internet-Core zu haben. Ein Providerwechsel wirkt sich nur auf die Zuordnung im  Mappingsystem aus, nicht auf das Core Routing \cite{farinacci:2009:LISP}.\\
Da EIDs und RLOCs sich ansonsten ähnlich zu jetzigen IP-Addressen verhalten ist es weder notwenidig den Endgeräte zu modifzieren, noch die Router innerhalb des Internet-Core zu verändern. Nur an der Übergabe zwischen Internet-Core und Edge-Network sind Änderungen nötig. \cite{jen:2008:start} \\
Die Trennung von Internet-Core und Edge Netzwerken schafft mehr Modularität. Dies kann genutzt werden, um die beiden Strukturen unabhänig voneinander zu modifzieren und zu verbessern.\\
Der Mapping-Dienst kann benutzt werden, um den eingehenden Verkehr kontrolliert auf mehrer Verbindungen zu verteilen. \\
Durch die den Identfier/Locator-Split wird es möglich das sich Endgeräte bewegen ohne das sich ihr Identfier ändert, so dass Verbindungen auffrecht erhalten können. Dies bedingt jedoch ein ausreichend schnelles Mappingsystem, da ohne korrekte Zuordnung keine Daten zum Endgerät geleitet werden können. \\

\paragraph{Nachteile}
Die Umwandlung zwischen RLOCs und EIDs ist mit gewissen Aufwand verbunden, der im Vergelich zu die Einsparungen beim Core Routing vernachlässigt werden kann. Zentraler Bestandteil des Seperation-Ansatzes ist eine Mapping-System zwischen EIDs und RLOCs, welches zuverlässig und sicher ist. 

\subsubsection{Umwandlung}
Für die Umwandlung zwischen RLOCs und EDIs existieren zwei verschiedene Ansätze. Beim Map \& Encap Verfahren werden die mit EID versehen Packete an der Schnitstelle zwischen ISP und Edge Network in ein IP-Paket mit zum Routen innerhalb des Internet-Cores versehen. Ein anderes Verdahren verfolgen Address Rewriting Protokolle, hier werden die Addressen des Ursprungspaketes umgeschrieben. 

\paragraph{Map \& Encap mit LISP}
LISP erfodert keine Modifikationen an den Hosts der Edge Networks. Sie arbeiten bei der Addressierung weiterhin mit IPv4 oder IPv6 Addressen. Auch die Namensauflösung und das Routing innerhalb von Edge-Networks muss nicht verändert werden. Wird ein Paket zum ISP übermittelt erreicht es beim Provider den ITR (Ingress Tunnel Router). Dieser ermitelt zum Ziel-EID die RLOCs mittels des Mappingsystems. Anschlißend packt er das IP-Paket in ein LISP-Paket. Als Zieladdress wird die zuvor ermittelte RLOC benutzt, Quelladdresse ist die RLOC des ITRs. Anschlißend wird das Packet durch den Internet-Core übermittelt. Es erreicht schließlich den ETR (Egress Tunnel Router) der die ermittelte RLOC besitzt. Dieser ist an das EN in dem sich die Ziel-EID befindet angeschlossen. Er packt das Packet aus und übermittel es an das EN. \\
 % TODO: Sprach verbessern
Durch die Kapselung des Ursprungspaketes kann es das zu kommen, dass das enstehenden Paket die MTU (Maximum Transfer Unit) einer Verbindung innerhalb des Internetcores überschreitet. LISP definiert zwei verscheidene Verhfahren um dieses Problem zu lösen. Um das Problem statusfrei und damit möglichst einfach zu behandeln wird empfohlen Pakete die eingepackt eine gewisse MTU übersteigen zu verwerfenen und die entsprechende ICMP Meldung zum Sender zu schicken. Die zweite Lösung basiert darauf das ein ITR in der Praxis einige Zuordnungen vorhalten wird um nicht immer wieder das Mapping zu erfragen. Zu diesen bekannten Mapping wird dann die MTU gespeichert, bei der eine ICMP-Too-Big Nachricht empfangen wurde. Pakete zu diesem RLOC die diese MTU übersteigen werden ebenfalls mit der ICMP-Too-Big Nachricht beantwortet.

\paragraph{Address Rewriting mit Six/One Router}
Im Gegensatz zu LISP wir bei Six/One das umwandeln zwischen EIDs und RLOCs von Routern innerhalb des Edge-Networks übernommen \cite{vogt:2008:six}. Das EN verfügt für jeden Verbindung zu einem ISP über ein Six/One Router, dieser wandelt EID in RLOCS um und umgekehrt. Unabhängig davon ob das Ziel EN Six/One unterstützt oder nicht werden die Quelladdresen ausgehnde Packete und die Zieladdressen eingehnder Packete umgewandelt. Handelt es sich bei der Gegenseite um ein EN mit Six/One Router werden ebenfalls die jeweils anderen Addressen umgeschreiben. Die orginalen Addressen werden im Six/One Extension Header des Packetes gespeichert, so dass eine Rückübersetzung am Ziel möglich ist. Um die RLOC des Ziel Netzwerkes zu ermitteln wird das Mappingsystem befragt.

\subsubsection{Mapping}
Das Mapping-System ist eine Datenbank, welche Paarungen aus EIDs und RLOCs enthält, wobei die EIDs als Schlüssel dienen. Um ein Packet zu versenden wird ein Locator des Empfängers benötigt, so dass ohne Mapping ein EN nicht von anderen ENs erreicht werden kann. Um eine möglichst hohe Erreichbarkeit zu gewährleisten sollte das Mappingsystem also redundant und sicher vor Manipulation sein. \\
Um bei Multihoming die Nutzung der einzelnden Verbindungen für einkommende Verbindungen genau zu steuern, muss das Mapping eine Gewichtng der RLOCs zu einem EID bieten \cite{mathy:2008:dht}. Es müssen ebenfalls Mechanismen geboten werden die zeitnahe die direkte Einflussnahme des EN Betreibers auf das Mapping erlauben. \\
Die Zuordnung zwischen EIDs und RLOCs sollte möglichst schnell durch geführt werden, um möglichst geringe Latenzen zu erhalten. Insbesondere Caching kann helfen um die Anzahl der vermutlich recht aufwendigen Anfragen an das Maping-System zu reduzieren. Ein Widerspruch dazu sollten Änderung am Mappingsystem möglich schnell und für alle Router sichtbar durch geführt werden. \\
Im Zusammenhang mit LISP wurden schon zahlreiche Mapping-Systeme speizfiziert, sie unterscheiden sich in der Art der Verteilung der Informationen \cite{mathy:2008:dht}. Einfache Systeme wie LISP-NERD verteilen die Mapping-Informationen aktiv, mittels des vom Push-Mechanismus. Dabei werden die kompletten Mapping Informationen auf allen Routern vorgehalten, und es wird ein Mechanismus geaschaffen der Änderung an die vorhandenen Knoten verteilet. Bei andere Protkollen, wie zum Beispiel LISP-DTH, ermitteln die Router nur die Mappings, welche sie aktuell benötigen. Es gibt keine Instanz die eine komplette Zuordung besitzt. Diese Protokolle haben eine komplexere Struktur, skalieren nach ersten Messungen jedoch gut \cite{iannone:2007:cost}. Es gibt auch Mapping-Systeme die eine Zwischenform nutzen, in dem nur die existierenden EIDs aktiv verteilt werden. Ein Beispiel hierfür bietet LISP-ALT.

\paragraph{LISP-DTH}




